{% extends 'base.html' %}

{% block title %}{{ author.get_full_name }} - Author Profile{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        <div class="card author-card">
            <div class="card-body text-center">
                {% if author.profile_picture %}
                    <img src="{{ author.profile_picture.url }}" alt="Profile Picture" 
                         class="rounded-circle profile-img mb-3">
                {% else %}
                    <div class="bg-secondary rounded-circle profile-img mx-auto mb-3 d-flex align-items-center justify-content-center">
                        <i class="fas fa-user fa-4x text-white"></i>
                    </div>
                {% endif %}
                
                <h4>{{ author.get_full_name }}</h4>
                <p class="text-muted">@{{ author.username }}</p>
                <span class="badge bg-success">{{ author.get_role_display }}</span>
                
                {% if author.bio %}
                    <p class="mt-3">{{ author.bio }}</p>
                {% endif %}
                
                <div class="social-links mt-3">
                    {% if author.website %}
                        <a href="{{ author.website }}" target="_blank" title="Website">
                            <i class="fas fa-globe"></i>
                        </a>
                    {% endif %}
                    {% if author.twitter %}
                        <a href="https://twitter.com/{{ author.twitter }}" target="_blank" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                    {% endif %}
                    {% if author.linkedin %}
                        <a href="https://linkedin.com/in/{{ author.linkedin }}" target="_blank" title="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    {% endif %}
                    {% if author.github %}
                        <a href="https://github.com/{{ author.github }}" target="_blank" title="GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                    {% endif %}
                </div>
                
                <div class="mt-3">
                    <div class="row text-center">
                        <div class="col">
                            <h5>{{ blogs.count }}</h5>
                            <small class="text-muted">Articles</small>
                        </div>
                        <div class="col">
                            <h5>{{ author.date_joined|date:"Y" }}</h5>
                            <small class="text-muted">Joined</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-8">
        <h3>Articles by {{ author.get_full_name }}</h3>
        
        {% if blogs %}
            {% for blog in blogs %}
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a href="{{ blog.get_absolute_url }}" class="text-decoration-none">{{ blog.title }}</a>
                        </h5>
                        <p class="card-text">{{ blog.body|truncatewords:30 }}</p>
                        
                        <div class="blog-meta">
                            <small class="text-muted">
                                <i class="fas fa-calendar me-1"></i>{{ blog.created_at|date:"M d, Y" }}
                                {% if blog.category %}
                                    <i class="fas fa-tag ms-3 me-1"></i>{{ blog.category.name }}
                                {% endif %}
                                <i class="fas fa-eye ms-3 me-1"></i>{{ blog.views }} views
                                {% if blog.get_rating_count > 0 %}
                                    <span class="rating-stars ms-3">
                                        <i class="fas fa-star"></i> {{ blog.get_average_rating|floatformat:1 }}
                                        ({{ blog.get_rating_count }})
                                    </span>
                                {% endif %}
                            </small>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="text-center py-5">
                <i class="fas fa-pen fa-3x text-muted mb-3"></i>
                <h5>No articles yet</h5>
                <p class="text-muted">This author hasn't published any articles yet.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
